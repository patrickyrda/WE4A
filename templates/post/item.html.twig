{% set isFile = post.files|length > 0 %}
{% set icon   = isFile ? 'bi bi-file-earmark' : 'bi bi-chat-left-text' %}
{% set card   = isFile ? 'border-primary'     : 'border-success'      %}

<article class="card {{ card }} shadow-sm"
         id="post-{{ post.id }}"
         data-post-id="{{ post.id }}">
  <div class="card-body">

    <p class="mb-1 fw-semibold">
      <i class="{{ icon }} me-1"></i>
      {% if isFile %}
        Partage de fichier :
        {% if post.files|length > 0 %}
          {% set file = post.files|first %}
          {{ file.filePath|split('/')|last }}
        {% endif %}
      {% else %}
        Message :
        <span class="text-success">
          {{ post.message|u.truncate(80, '…') }}
        </span>
      {% endif %}
    </p>

    <small class="text-muted">
      {{ post.userId.name }} {{ post.userId.surname }}
      – {{ post.date|date('d/m/Y H:i') }}
    </small>

    {# {% if is_granted('ROLE_TEACHER') %} #}
      <div class="btn-group btn-group-sm float-end">
       <button
  class="btn btn-outline-secondary"
  type="button"
  data-bs-toggle="modal"
  data-bs-target="#postModal"
  data-post-id="{{ post.id }}"
  data-action="click->post-actions#loadEditForm">
  Modifier
</button>

        {% include 'post/_delete_form.html.twig' with { post: post } only %}
      </div>
    {# {% endif %} #}
  </div>
</article>
